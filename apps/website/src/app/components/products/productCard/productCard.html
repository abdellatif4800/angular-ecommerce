<div
  class="card bg-base-100 shadow-md hover:shadow-xl transition-all duration-300 card-radius overflow-hidden group w-full h-full flex flex-col"
>
  <!-- Product Image Section -->
  <figure class="relative w-full h-56 overflow-hidden bg-base-200">
    <a
      [routerLink]="['/product', product()?.productName]"
      [queryParams]="{ id: product()?._id, subCategoryID:product()?.subCategoryID,subCategoryName: product()?.subCategoryName, productName: product()?.productName }"
      class="block w-full h-full"
    >
      <img
        [src]="product()?.imageUrl"
        [alt]="product()?.productName"
        class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"
      />
    </a>
    @if (product()?.discount !== 0) {
    <div class="badge badge-primary absolute top-3 right-3 shadow-lg">
      -{{ product()?.discount }}%
    </div>
    }
  </figure>

  <!-- Product Info Section -->
  <div class="card-body p-4 flex flex-col flex-grow gap-3">
    <!-- Title and Rating -->
    <div class="flex flex-col gap-2">
      <h2 class="card-title text-base font-semibold line-clamp-2 min-h-[3rem]">
        <a
          [routerLink]="['/product', product()?.productName]"
          [queryParams]="{ id: product()?.productName, category: product()?.subCategoryID, name: product()?.productName }"
          class="hover:text-primary transition-colors duration-300"
        >
          {{ product()?.productName }}
        </a>
      </h2>
      <div class="rating rating-sm">
        @for (star of [1, 2, 3, 4, 5]; track star) {
        <input
          type="radio"
          [name]="'rating-' + product()?._id"
          class="mask mask-star-2 bg-warning"
          [checked]="product()?.rate === star"
          [disabled]="true"
          [attr.aria-label]="star + ' stars'"
        />
        }
      </div>
    </div>

    <!-- Price Section -->
    <div class="flex items-center gap-2 mt-auto">
      @if (product()?.discount !== 0) {
      <div class="flex flex-col">
        <span class="text-xl font-bold text-primary">
          ${{ priceAfterDiscount(product()?.price ?? 0, product()?.discount ??
          0) }}
        </span>
        <span class="text-sm opacity-60 line-through">
          ${{ product()?.price }}
        </span>
      </div>
      } @else {
      <span class="text-xl font-bold">${{ product()?.price }}</span>
      }
    </div>

    <!-- Action Buttons -->
    <div class="card-actions justify-end gap-2 mt-2">
      <button
        class="btn btn-ghost btn-sm btn-circle hover:btn-error transition-colors duration-300"
        [attr.aria-label]="'Add to wishlist'"
      >
        <lucide-angular [img]="HeartIcon" class="w-4 h-4"></lucide-angular>
      </button>
      <button
        class="btn btn-primary btn-sm flex-1 selector-radius"
        (click)="addItemToCart()"
        [attr.aria-label]="'Add to cart'"
      >
        <lucide-angular [img]="CartIcon" class="w-4 h-4"></lucide-angular>
        <span class="hidden sm:inline">Add to Cart</span>
      </button>
    </div>
  </div>
</div>
