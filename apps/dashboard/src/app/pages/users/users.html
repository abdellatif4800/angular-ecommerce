<div class="flex flex-col gap-2 p-2">
  <div class="flex flex-row gap-2">
    <button
      class="btn rounded-4xl"
      [ngClass]="currentStatus() === 'Blocked' ? 'btn-secondary' : 'btn-neutral'"
      (click)="changeStatus(true)"
    >
      Blocked
    </button>

    <button
      class="btn rounded-4xl"
      [ngClass]="currentStatus() === 'Not Blocked' ? 'btn-secondary' : 'btn-neutral'"
      (click)="changeStatus(false)"
    >
      Not Blocked
    </button>
  </div>
  <div
    class="p-2 border border-emerald-800 w-full overflow-scroll grid grid-cols-2 gap-2"
  >
    @for(user of listOfUsers();track $index; let idx = $index){
    <div class="border flex flex-col gap-2 p-2 font-bold">
      <div>Username: {{user.username}}</div>

      <div>Email: {{user.email}}</div>

      <div>Joined at: {{user.joinedAt}}</div>

      <!-- {{user.isBlocked}} -->
      <div>
        Is Blocked:
        <input
          type="checkbox"
          [(ngModel)]="user.isBlocked"
          (change)="updateUser(user._id, 'isBlocked', user.isBlocked)"
        />
      </div>

      <div class="border border-red-500 flex flex-col gap-2 justify-between">
        <div class="collapse bg-base-100 border-base-300 border">
          <input type="checkbox" />
          <!--title-->
          <div class="collapse-title font-semibold">Cart Items</div>
          <!--content-->
          <div class="collapse-content text-sm grid grid-cols-2 gap-2">
            @for (item of user.cart.items; track $index) {
            <div
              class="flex flex-col gap-5 bg-base-200 shadow-md p-4 rounded-2xl"
            >
              <p class="font-bold">{{ item.productName }}</p>

              <div class="flex flex-row gap-4">
                <!-- <span>{{ item.price | currency }}</span> -->

                <p><span class="font-bold">Qun:</span>{{ item.quantity }}</p>
                <p>
                  <span class="font-bold"> Total: </span>{{ item.itemTotal }}
                </p>
              </div>
            </div>
            }
          </div>
        </div>
      </div>
    </div>
    }
  </div>
</div>
